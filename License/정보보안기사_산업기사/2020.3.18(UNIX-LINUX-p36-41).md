## Unix/Linux 기본학습/p36~41



3) 디렉터리 관리

1.일반 파일

2.디렉터리

3.특수 파일



유닉스에서는 모든 I/O의 대상체를 파일로 간주한다.



실제 시험에서 자주 출제 되는건 "ls -l" 명령 출력 결과가 많이 나온다.



ls -al : a가 의미하는 건 숨김파일까지 보겠다



각 필드 설명 : 

①파일종류 및 접근권한

파일종류(4bit) + 특수권한 비트(3bit) + user권한(3bit) + group 권한(3bit) + other권한(3bit) = 16bit

3bit라는 것은 8진수로 표현하겠다라는 말이잖아(0~7)



여기서 중요한것!!! **디렉터리와 파일에서의 rwx의 의미는 다르다**

파일 : r(파일 읽기), w(파일 쓰기), x(명령어 실행)

디렉터리 : 

r : 디렉터리 내용을 볼 수 있는 권한 ex) ls 

w : 디렉터리 내 파일이나 디렉터리를 만들 수 있는 권한,ex) touch, mkdir, rmdir, rm

x : 디렉터리 안으로 이동할 수 있는 권한 ex) cd 



일단 기본적으로 우리가 파일을 생성하게 되면 기본 접근권한으로 666을, 디렉터리의 경우 기본 접근권한으로 777을 설정한다.



②하드 링크수

③소유주

④소유 그룹

⑤크기

⑥최종 수정일

⑦최종 수정시간

⑧**파일명**



우리가 일반적으로 기존 디렉터리를 삭제할 때 2가지가 있다.

rm명령어를 쓰냐? rmdir를 쓰냐

그런데 rmdir 같은 경우는 그 디렉터리 안에 파일이 하나도 없어야 지울 수 있기 때문에 rm 명령어를 자주 사용



rm -rf 같은경우는 -r이 recursive하게 지우겠다. -f는 force(무시무시한 명령어~)



**4) 파일 권한 관리**

chmod : 접근권한 변경(기존 파일 또는 디렉터리에 대한 접근권한을 변경할 때 사용)

2가지 방법이 있다. 1)8진수 , 2)문자

8진수로 하는 방법은 다들 잘 아는데 문자로 하는 방법도 무조건 알아놔야 한다!!!



대상 : u(user), g(group), o(others), a(all)

연산자 : +(추가), -(제거), =(지정)

접근권한 : r(읽기), w(쓰기), x(실행)



chmod go-w daemon.c : damon.c 파일의 group,others에게 쓰기 권한을 제거 하겠다.

chmod a=rw daemon.c : daemon.c의 모든 사용자에게 rw 권한을 설정해주겠다.  

chmod g+x,o-x daemon : daemon의 group에게 실행권한을 추가하고 others의 실행권한을 제거하겠다.



chown/chgrp (소유주 또는 소유그룹 변경)



#### 접근권한 마스크(umask)

umask는 앞으로 만들어질 파일에 영향을 미치는 명령어이다.

1.파일을 새롭게 생성할 때 적용되는 것

2.제거할 접근 권한을 명시



기본접근 권한에서 제거할 접근권한을 명시해놓은걸 umask라고 한다.



시스템 관리자는 /etc/profile 파일에 umask를 지정하여 시스템 전체 사용자에게 획일적인 umask 값을 적용시킬 수 있다.



**mask란 무엇인가?**

쉽게 말하면 우리가 보고싶은 또는 뽑아내고 싶은 정보만 볼수 있도록 하는 연산이라고 생각하면 됨

좀 더 자세히 말하자면... "대상 비트 열에서 특정 비트 열을 추출하기 위한 연산"

10101010 비트가 있다. 여기서 하위 4비트만 뽑아내고 싶음! 그러면 &(mask연산)를 통해서

&

00001111

이렇게 하면 하위 4비트만 나올 수 있겠지?



또 네트워크에서 Netmask라는 것도 있잖아.

Netmask : 네트워크 ID만을 추출하기 위한 mask 값

192.168.197.131

&

255.255.255.0 => 서브넷 마스크

192.168.197.0



3.umask : 제거할 접근권한을 명시 => 제거할 권한 비트를 추출, umask가 022이다. 그러면 022를 반전시켜봐!!! 022 => ~ 000 010 010 => 111 101 101

umask를 022로 입력하면 파일의 디폴트 접근권한은 666이잖아? rwx r-x r-x(755)



   110 110 110

&111 101 101

   110 100 100 : rw- r-- r(644)



#### 중요!!!

umask가 333이다.

그럼 011 011 011을 반전시켜야겠지? 100 100 100

​	110 110 110

&

​	100 100 100

=  100 100 100 : r-- r-- r--(444)