## 2020.4.21~22 멀캠강의내용(하이퍼레저2)

![image-20200421101117724](C:\Users\KAUstar\AppData\Roaming\Typora\typora-user-images\image-20200421101117724.png)

.yml 파일은 구성파일

.sh 파일은 실행파일



포트가 있다는건 "전화 번호"가 있다는 말

포트가 있으면 자기 전화 번호가 있다는 말



sacc : simple asset chain code



peer chaincode install - n jes -v 1.0 -p github.com/sacc  : 피어에 체인코드를 설치할껀데 이름은 jes 버전은 1.0이고 github.com/sacc 경로에 있는걸 설치하겠다

오더러가 생성한 블록이랑, 메타데이터도 커미터피어한테 준다. 어떤 정책 설정이 되어있는지를

보증정책이 맞는지 

엔돌서가 2개가 있는 둘다 허락해야하는지 하나만 허락해도 괜찮은지가 적혀있는게 보증정책

그걸 커미터 피어가 가십프로토콜을 통해서 서로서로 검수 작업을 한다.

가십프로토콜은 서로 재잘재잘



큐는 원통이 하나밖에 없는 SOLO



멀티 큐잉 제품인 kafuka를 모듈러식으로 plug&play





우리가 실제 실무에서 패브릭 네트워크를 구축할때는

오더러 별도의 컴퓨터

CA 실제 인증기관 컴퓨터

피어 별도의 컴퓨터



우리는 하나의 컴퓨터에서 도커를 이용해서 패브릭을 돌리고 있음



블록체인 체인코드 개발자들은 shim이라는 document를 보면서 어떤 메소드를 써가면서 코드를 

작성해야 할지 알게 된다.





Invoke메서드는 function 과 parameter를 관리해주는 메서드

<hr>

readset : 트랜젝션 실행 전 블록상태

writeset : 트랜젝션 실행 후 블록상태

체인코드를 실행한 결과 값이 readset/writeset이고 그걸 클라이언트에게 리턴해줌(이 때, 원장은 업데이트 된게 아니다잉~)

리턴 결과 값을 클라이언트는 orderer에게 제출하고 



하이퍼레저 SDK : 사용자가 하이퍼레저 패브릭 네트워크에서 리턴해주는 결과 값을 받아서 이게 맞는지 안맞는지 판단해주는 라이브러리 



피어는 default로 원장을 가지고 있어~





#### 시나리오

국토부와 건강공단은 프라이빗 블록체인을 구축하고자 한다.

먼저 각자의 기관에서 데이터 센터 머신을 이용하여 





신원증명에 대한 문제를 해결하기위해서 CA(Fabric-ca,Verisign,Thawte 등)가 필요하다. => CA는 그냥 인증서를 발급하는 기관이고 MSP는 다르다!!!

CA는 

CA는 오더러가 하는 역할에 대해서는 지정해주지 않음 그런걸 정하는건 MSP임

crypto-config : 

config-tx : 조직에 대한 설정이 들어가 있다?  host는 국토부이고, orderer의 이름은 뭐고 , port는 뭐이고

머신에 대한 MSP, 관리자에 대한 MSP, 조직 이름에 대한 MSP? 이 3가지를 받는데.. 이 가지는







명찰안에 인증서가 포함되어 있어야 한다. 명찰이 인증서가 아니다!!!!

인증서를 발급하는 기관은 CA

CA기관이 MSP를 위해 인증서를 발급해주는데 이 인증서에는 개인키/공개키 2가지를 준다. 이때 

이 개인키 공개키



오더러하나에 



역할(무엇을)





조직에 대한 MSP : 국토부를 인증하는 인증서, 개인키/공개키, 조직의 역할

머신에 대한 MSP : 머

관리자에 대한 MSP



건강공단도 CA가 필요한데 돈내고 하는 CA기관을 이용하기보다 그냥 하이퍼레저에서 지원해주는 Fabric-ca를 사용하려고 한다.





CA로부터 받는 **인증서,개인키/공개키,역할**







MSP는 명찰이다 명찰안에 인증서,개인키/공개키,역할이 들어가있음





orderer가 채널을 구성하기 위해 최초의 제네시스 블록을 생성함



트랜젝션을 수행해보는게 보증



보증정책이 제대로 수행됬는지를 보는게 검증





아티팩트 : 



![image-20200422105249349](C:\Users\KAUstar\AppData\Roaming\Typora\typora-user-images\image-20200422105249349.png)

![image-20200422104403694](C:\Users\KAUstar\AppData\Roaming\Typora\typora-user-images\image-20200422104403694.png)

멤버는 조직이기도 하고 머신이기도 하고 관리자이기도 하다

Org1MSP.member 에서 3가지 정보가 오겠지? Org2MSP.member 도 마찬가지로 3가지가 오겠지

근데 중요한건 각각 3개중에 1개씩만 서명 받아도 보증을 받았다고 할 수 있음





63페이지 MSP폴더구조 봐보기

MSP 



역할은 하이퍼레저 코어에 있는 MSP 시스템 엔진에 의해서 흩어져있는 구성파일을 읽어서 MSP 역할을 이해





하이퍼레저 네트워크 판을 이해하고 체인코드를 개발하고 있다.

네트워크 판을 만들어주는게 네트워크 관리자

체인코드 개발하는 사람은 개발자

